appId: com.tracenium.agent
productName: Tracenium Agent

asar: true

extraMetadata:
  main: "main.js"

files:
  - "*.js"
  - "config.html"
  - "build/**"
  - "package.json"
  - "!node_modules/electron/**"

extraResources:
  # .env empaquetado (solo defaults; NO debe incluir AGENT_KEY)
  - from: ".env"
    to: ".env"

  # UI assets para asegurar que existan en packaged
  - from: "config.html"
    to: "config.html"
  - from: "preload.js"
    to: "preload.js"

  - from: "banner.png"
    to: "banner.png"
  - from: "banner_.png"
    to: "banner_.png"

publish:
  provider: github
  owner: racostaInnomius
  repo: certusws-tracenium-agent
  releaseType: draft

# ===========================
# WINDOWS (AUTO-UPDATE OK)
# ===========================
win:
  target:
    - nsis
    - zip
  icon: build/icon.ico
  artifactName: "tracenium-agent-${version}-win.${ext}"

nsis:
  oneClick: true
  perMachine: false
  allowToChangeInstallationDirectory: false
  createDesktopShortcut: false
  createStartMenuShortcut: false
  runAfterFinish: true

# ===========================
# MACOS
# ===========================
mac:
  target:
    - dmg
    - zip
  icon: build/icon.icns
  artifactName: "tracenium-agent-${version}-${arch}.${ext}"
  category: public.app-category.utilities

# ===========================
# LINUX
# ===========================
linux:
  target:
    - deb
    - rpm
    - zip
  icon: build/icon.png
  category: Utility
  artifactName: "tracenium-agent-${version}-${arch}.${ext}"
